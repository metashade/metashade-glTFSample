{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Update Python Dependencies",
            "dependsOrder": "sequence",
            "dependsOn": [
                "_install_from_toml",
                "_generate_requirements"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "presentation": {
                "reveal": "always",
                "clear": true
            }
        },
        {
            "label": "_install_from_toml",
            "type": "shell",
            "command": "${workspaceFolder}/.venv/Scripts/python.exe",
            "args": ["-m", "pip", "install", "-e", "."],
            "options": {"cwd": "${workspaceFolder}"},
            "presentation": {"reveal": "silent"}
        },
        {
            "label": "_generate_requirements", 
            "type": "shell",
            "command": "${workspaceFolder}/.venv/Scripts/python.exe",
            "args": ["-c", "import subprocess; output = subprocess.check_output(['python', '-m', 'pip', 'freeze'], text=True); filtered = '\\n'.join(line for line in output.split('\\n') if not line.startswith('-e ')); open('requirements.txt', 'w').write(filtered)"],
            "options": {"cwd": "${workspaceFolder}"},
            "presentation": {"reveal": "silent"}
        }
    ]
}